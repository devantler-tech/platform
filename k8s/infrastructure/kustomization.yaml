apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - configmaps/oauth2-proxy-configmap.yaml
  - https://github.com/devantler/oci-artifacts//k8s/cert-manager
  - https://github.com/devantler/oci-artifacts//k8s/cloudflared
  - https://github.com/devantler/oci-artifacts//k8s/goldilocks
  - https://github.com/devantler/oci-artifacts//k8s/homepage
  - https://github.com/devantler/oci-artifacts//k8s/metrics-server
  - https://github.com/devantler/oci-artifacts//k8s/oauth2-proxy
  - https://github.com/devantler/oci-artifacts//k8s/openebs
  - https://github.com/devantler/oci-artifacts//k8s/traefik
  - ingresses/cilium-hubble-ingress.yaml

patches:
  - path: patches/flux-system-patch.yaml
    target:
      kind: Namespace
      name: flux-system
      namespace: flux-system
  - path: patches/goldilocks-patch.yaml
    target:
      kind: HelmRelease
      name: goldilocks
      namespace: goldilocks
  - path: patches/homepage-patch.yaml
    target:
      kind: HelmRelease
      name: homepage
      namespace: homepage
  - path: patches/kube-system-patch.yaml
    target:
      kind: Namespace
      name: kube-system
      namespace: kube-system
  - path: patches/kubelet-serving-cert-approver-patch.yaml
    target:
      kind: Namespace
      name: kubelet-serving-cert-approver
      namespace: kubelet-serving-cert-approver
  - path: patches/traefik-patch.yaml
    target:
      kind: HelmRelease
      name: traefik
      namespace: traefik
