apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../infrastructure/services/cert-manager
  - ../../infrastructure/services/cert-manager/secrets/cloudflare-dns-api-key.yaml
  - ../../infrastructure/services/cloudflared
  - ../../infrastructure/services/flux-alerter
  - ../../infrastructure/services/flux-webhook-receiver
  - ../../infrastructure/services/metallb
  - ../../infrastructure/services/reloader
  - ../../infrastructure/services/traefik-ingress
  # - ../../infrastructure/services/kube-prometheus-stack
  #- ../../infrastructure/services/rook-ceph
patches:
  - path: patches/cloudflared-patch.yaml
    target:
      kind: Deployment
      name: cloudflared-cloudflare-tunnel-remote
      namespace: cloudflared
