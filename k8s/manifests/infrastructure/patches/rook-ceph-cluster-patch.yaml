apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: rook-ceph-cluster
  namespace: rook-ceph
spec:
  # https://github.com/rook/rook/blob/release-1.14/deploy/charts/rook-ceph/values.yaml
  values:
    ingress:
      annotations:
        traefik.ingress.kubernetes.io/router.middlewares: traefik-traefik-forward-auth@kubernetescrd
    cephBlockPools:
      - name: ceph-blockpool
        spec:
          replicated:
            size: ${rook_ceph_cluster_ceph_blockpool_replicated_size:=1}
