- name: Bootstrap new nodes
  hosts: nodes-ips
  remote_user: devantler
  become: yes
  roles:
   - geerlingguy.git
   - geerlingguy.pip
   - geerlingguy.docker_arm
   - geerlingguy.security
  tasks:
    - name: Update config.txt
      blockinfile:
        path: /boot/firmware/config.txt
        content: |
          # PoE Hat Fan Speeds
          dtparam=poe_fan_temp0=65000
          dtparam=poe_fan_temp1=70000
          dtparam=poe_fan_temp2=75000
          dtparam=poe_fan_temp3=80000
        state: present
    - name: Reboot nodes
      reboot:
    # - name: Ansible apt install lvm2
    #   apt:
    #     name: lvm2
    #     state: present
    # - name: Load modules on boot
    #   blockinfile:
    #     path: /etc/modules
    #     content: |
    #       ceph
    #     state: present